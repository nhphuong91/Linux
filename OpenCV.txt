# Steps for installing opencv
# Note: Setup all pip2/3 & venv beforehand

1. Install dependencies
-----------------------------------------------------------
sudo apt-get update
sudo apt-get upgrade

sudo apt-get install build-essential cmake unzip pkg-config

sudo apt-get install libgtk-3-dev

sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev
sudo apt-get install libxvidcore-dev libx264-dev

sudo apt-get install libatlas-base-dev gfortran

sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev
-----------------------------------------------------------

2. Get opencv and opencv_contrib git
-----------------------------------------------------------
git clone https://github.com/opencv/opencv.git
git clone https://github.com/opencv/opencv_contrib.git
-----------------------------------------------------------

3. Activate venv & install numpy
-----------------------------------------------------------
pip install numpy
-----------------------------------------------------------

4. Configure OpenCV with CMake
-----------------------------------------------------------
cd ~/opencv
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/usr/local \
    -D WITH_CUDA=OFF \
    -D INSTALL_PYTHON_EXAMPLES=ON \
    -D OPENCV_EXTRA_MODULES_PATH=~/opencv_4/opencv_contrib/modules \
    -D OPENCV_ENABLE_NONFREE=ON \
    -D BUILD_EXAMPLES=ON \
    -D BUILD_NEW_PYTHON_SUPPORT=ON \
    -D BUILD_opencv_python3=ON \
    -D HAVE_opencv_python3=ON \
    -D PYTHON_EXECUTABLE=~/.virtualenvs/cv/bin/python \
    -D PYTHON_DEFAULT_EXECUTABLE=/usr/bin/python3 \
    ..

Note: Edit "PYTHON_EXECUTABLE" & "OPENCV_EXTRA_MODULES_PATH" depend on venv setup
-----------------------------------------------------------

5. Build opencv
-----------------------------------------------------------
make -j6 # j=# of parallel threads
-----------------------------------------------------------

6. Installing and verifying OpenCV
-----------------------------------------------------------
sudo make install
sudo ldconfig
-----------------------------------------------------------
